(this.webpackJsonplearn_redux=this.webpackJsonplearn_redux||[]).push([[0],{152:function(e,t,a){e.exports=a(252)},157:function(e,t,a){},158:function(e,t,a){},165:function(e,t,a){},166:function(e,t,a){},191:function(e,t,a){},192:function(e,t,a){},244:function(e,t,a){},252:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(3),i=a.n(s),c=(a(157),a(8)),o=a(9),l=a(11),u=a(10),m=(a(158),a(159),a(24)),h=(a(165),a(90)),p=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){var e=(this.props.box[0]-1)*this.props.size;return r.a.createElement("div",{className:"tableBox"},r.a.createElement("div",{className:"tableRows"},this.renderLine("rows")),r.a.createElement("div",{className:"tableColumns",style:{width:e}},this.renderLine("columns")))}},{key:"renderLine",value:function(e){var t=Object(h.a)(this.props.box,2),a=t[0],n=t[1],s=this.props.size;if("rows"===e){var i=a-1;return this.getArr(n-1).map((function(e){return r.a.createElement("div",{key:e,className:"rows",style:{width:s*i,height:s}})}))}if("columns"===e){var c=n-1;return this.getArr(a-1).map((function(e){return r.a.createElement("div",{key:e,className:"columns",style:{width:s,height:s*c}})}))}}},{key:"getArr",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=[],a=0;a<e;a++)t.push(a+1);return t}}]),a}(n.Component);p.defaultProps={box:[0,0],size:0};var d="end",f={rows:25,columns:25,size:20,continuousStep:5,defaultPlayer:"white"},v=a(32);function b(e,t,a,n){for(var r=a.x,s=a.y,i=n.columns,c=n.continuousStep,o=1,l=r+1;l<=i;l++){if(e[s*i+l]!==t)break;o++}for(var u=r-1;u>=0;u--){if(e[s*i+u]!==t)break;o++}return o>=c?t:""}function y(e,t,a,n){for(var r=a.x,s=a.y,i=n.rows,c=n.continuousStep,o=1,l=s+1;l<=i;l++){if(e[l*i+r]!==t)break;o++}for(var u=s-1;u>=0;u--){if(e[u*i+r]!==t)break;o++}return o>=c?t:""}function g(e,t,a,n){for(var r=a.x,s=a.y,i=n.rows,c=n.columns,o=n.continuousStep,l=1,u=r+1;u<=c;u++){var m=u,h=s-(u-r);if(h<0)break;if(e[h*i+m]!==t)break;l++}for(var p=r-1;p>=0;p--){var d=p,f=s+(r-p);if(f>i)break;if(e[f*i+d]!==t)break;l++}return l>=o?t:""}function w(e,t,a,n){for(var r=a.x,s=a.y,i=n.rows,c=n.columns,o=n.continuousStep,l=1,u=r+1;u<=c;u++){var m=u,h=s+(u-r);if(h>i)break;if(e[h*i+m]!==t)break;l++}for(var p=r-1;p>=0;p--){var d=p,f=s-(r-p);if(f<0)break;if(e[f*i+d]!==t)break;l++}return l>=o?t:""}function O(e){return function(t,a){t({type:"reset_status",dec:"\u91cd\u7f6e\u6e38\u620f\u72b6\u6001",gameStatus:e,nextPlayer:a().setting.defaultPlayer}),t((function(e,t){var a=t().setting;e({type:"reset_data",dec:"\u6e05\u7a7a\u6e38\u620f\u6570\u636e",rows:a.rows,columns:a.columns})}))}}function j(e){return function(t,a){var n=a().status.nextPlayer;t({type:"update_data",dec:"\u66f4\u65b0\u6e38\u620f\u6570\u636e",index:e,player:n}),t(function(e){return function(t,a){var n,r=a(),s=r.status.nextPlayer,i=r.gameData[r.gameData.length-1],c=(n={},Object(v.a)(n,"white","black"),Object(v.a)(n,"black","white"),n),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=a.setting.columns,r={x:t%n,y:Math.floor(t/n)},s=e[t],i="";return i=(i=(i=(i=i||b(e,s,r,a.setting))||y(e,s,r,a.setting))||g(e,s,r,a.setting))||w(e,s,r,a.setting)}(i.data,e,r);t({type:"update_status",dec:"\u66f4\u65b0\u6e38\u620f\u72b6\u6001",nowStep:i.step,nextPlayer:c[s],winner:o,gameStatus:o?d:r.status.gameStatus})}}(e))}}var E=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).colors={black:"#000",white:"#fff"},n}return Object(o.a)(a,[{key:"render",value:function(){var e=this.props,t=e.size,a=e.value,n={width:t-2,height:t-2,backgroundColor:a?this.colors[a]:"transparent"};return r.a.createElement("div",{className:"box",style:{width:t,height:t}},r.a.createElement("span",{className:"player",style:n,onClick:this.handlePlay.bind(this)}))}},{key:"handlePlay",value:function(){this.props.value||"start"!==this.props.gameStatus||this.props.dispatch(j(this.props.index))}}]),a}(n.Component);E.defaultProps={value:null,index:0};var k=Object(m.b)((function(e){return{size:e.setting.size,gameStatus:e.status.gameStatus}}))(E),S=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"rowBox"},this.props.data.map((function(t,a){return r.a.createElement(k,{key:a,index:e.props.startIndex+a,value:t})})))}}]),a}(n.Component);S.defaultProps={data:[],startIndex:0};var x=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"wrapBox"},this.renderRowBox())}},{key:"renderRowBox",value:function(){for(var e=Object(h.a)(this.props.box,2),t=e[0],a=e[1],n=this.props.data,s=[],i=0;i<a;i++){var c=r.a.createElement(S,{key:i,startIndex:i*t,data:n.slice(i*t,i*t+t)});s.push(c)}return s}}]),a}(n.Component);x.defaultProps={box:[0,0],data:[]};var P=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"checkerboard"},r.a.createElement(p,{box:this.props.box,size:this.props.size}),r.a.createElement(x,{box:this.props.box,data:this.props.lastRecord.data}))}}]),a}(n.Component),N=Object(m.b)((function(e){var t=e.setting,a=t.size,n=t.rows,r=t.columns,s=e.status.nowStep;return{size:a,box:[r,n],lastRecord:e.gameData[s]}}))(P),I=a(44),C=(a(166),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"startGame"},this.props.gameStatus===d&&r.a.createElement(I.a,{type:"primary",size:"large",onClick:this.handleStart.bind(this)},"\u5f00\u59cb\u6e38\u620f"),"start"===this.props.gameStatus&&r.a.createElement(I.a,{type:"primary",size:"large",onClick:this.handlePause.bind(this,"pause")},"\u6682\u505c"),"pause"===this.props.gameStatus&&r.a.createElement(I.a,{type:"primary",size:"large",onClick:this.handlePause.bind(this,"start")},"\u7ee7\u7eed"),"start"===this.props.gameStatus&&r.a.createElement(I.a,{danger:!0,size:"large",onClick:this.handleStart.bind(this)},"\u91cd\u65b0\u5f00\u59cb"),this.props.gameStatus!==d&&r.a.createElement(I.a,{danger:!0,size:"large",onClick:this.handlePause.bind(this,d)},"\u7ed3\u675f\u6e38\u620f"))}},{key:"handleStart",value:function(){this.props.dispatch(O("start"))}},{key:"handlePause",value:function(e){this.props.dispatch(function(e){return{type:"change_status",dec:"\u6682\u505c\u6216\u7ee7\u7eed\u6e38\u620f",gameStatus:e}}(e))}}]),a}(n.Component)),D=Object(m.b)((function(e){return{gameStatus:e.status.gameStatus}}))(C),z=(a(191),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).status={start:"\u8fdb\u884c\u4e2d",pause:"\u6682\u505c\u4e2d",end:"\u7ed3\u675f"},n.player={black:"\u9ed1\u68cb",white:"\u767d\u68cb"},n}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"GameInfo"},r.a.createElement("div",null,r.a.createElement("div",{className:"infoItem"},"\u6e38\u620f\u72b6\u6001: ",this.status[this.props.gameStatus]),r.a.createElement("div",{className:"infoItem"},"\u6e38\u620f\u603b\u6b65\u6570: ",this.props.nowStep),r.a.createElement("div",{className:"infoItem"},"\u4e0b\u4e00\u6b65\u9009\u624b: ",this.player[this.props.nextPlayer])),r.a.createElement("div",null,this.props.winner&&r.a.createElement("div",{className:"winner"},this.player[this.props.winner],"\u80dc")))}}]),a}(n.Component)),_=Object(m.b)((function(e){var t=e.status;return{gameStatus:t.gameStatus,nowStep:t.nowStep,nextPlayer:t.nextPlayer,winner:t.winner}}))(z),B=a(23),Y=(a(192),a(256)),R=a(255),T=a(254),A=a(253),M=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={rows:"",columns:"",size:"",first:"",winPremise:"",propsData:{}},n}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"gameSetting"},r.a.createElement("div",{className:"title"},"\u6e38\u620f\u8bbe\u7f6e"),r.a.createElement(Y.a,{title:"\u68cb\u76d8\u8bbe\u7f6e",layout:"vertical",column:1},r.a.createElement(Y.a.Item,{label:"\u884c\u6570"},r.a.createElement(R.a,{value:this.state.rows,onChange:this.handleInput.bind(this,"rows")})),r.a.createElement(Y.a.Item,{label:"\u5217\u6570"},r.a.createElement(R.a,{value:this.state.columns,onChange:this.handleInput.bind(this,"columns")})),r.a.createElement(Y.a.Item,{label:"\u68cb\u5b50\u5c3a\u5bf8"},r.a.createElement(R.a,{value:this.state.size,onChange:this.handleInput.bind(this,"size")}))),r.a.createElement(Y.a,{title:"\u5176\u5b83\u8bbe\u7f6e",layout:"vertical",column:1},r.a.createElement(Y.a.Item,{label:"\u5148\u624b"},r.a.createElement(T.a,{value:this.state.first,onChange:this.handleSelect.bind(this)},r.a.createElement(T.a.Option,{value:"white"},"\u767d\u68cb"),r.a.createElement(T.a.Option,{value:"black"},"\u9ed1\u68cb"))),r.a.createElement(Y.a.Item,{label:"\u8fde\u7eed\u51e0\u5b50\u80dc"},r.a.createElement(R.a,{value:this.state.winPremise,onChange:this.handleInput.bind(this,"winPremise")}))),r.a.createElement("div",null,r.a.createElement(I.a,{type:"primary",onClick:this.handleOk.bind(this)},"\u786e\u5b9a\u66f4\u6539")),r.a.createElement("div",{style:{paddingTop:20}},r.a.createElement(I.a,{onClick:this.handleReset.bind(this)},"\u6062\u590d\u9ed8\u8ba4\u8bbe\u7f6e")))}},{key:"handleInput",value:function(e,t){var a=t.target.value;/^([1-9]\d*)?$/.test(a)&&this.setState(Object(v.a)({},e,a))}},{key:"handleSelect",value:function(e){this.setState({first:e})}},{key:"handleOk",value:function(){if(this.props.gameStatus===d){var e={rows:parseInt(this.state.rows,10),columns:parseInt(this.state.columns,10),size:parseInt(this.state.size,10),defaultPlayer:this.state.first,continuousStep:parseInt(this.state.winPremise,10)};this.props.dispatch(function(e){return function(t,a){t({type:"update_setting",dec:"\u66f4\u6539\u6e38\u620f\u8bbe\u7f6e",settingData:e}),t(O(d))}}(e))}else this.showInfo()}},{key:"handleReset",value:function(){this.props.gameStatus===d?this.props.dispatch((function(e,t){e({type:"reset_setting",dec:"\u6062\u590d\u6e38\u620f\u9ed8\u8ba4\u8bbe\u7f6e"}),e(O(d))})):this.showInfo()}},{key:"showInfo",value:function(){A.a.info({title:"\u8bf7\u5148\u7ed3\u675f\u5f53\u524d\u6e38\u620f",okText:"\u597d\u7684"})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return t.propsData!==e?Object(B.a)(Object(B.a)({},e),{},{propsData:e}):null}}]),a}(n.Component),H=Object(m.b)((function(e){var t=e.setting;return{rows:t.rows,columns:t.columns,size:t.size,first:t.defaultPlayer,winPremise:t.continuousStep,gameStatus:e.status.gameStatus}}))(M),J=(a(244),a(259)),L=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n,r;return Object(c.a)(this,a),(r=t.call(this,e)).player=(n={},Object(v.a)(n,"white","\u767d\u68cb"),Object(v.a)(n,"black","\u9ed1\u68cb"),n),r}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"historyData"},r.a.createElement("div",{className:"title"},"\u5386\u53f2\u6570\u636e"),r.a.createElement(J.a,null,this.props.historyData.reverse().map((function(t,a){var n=t.state.status.winner;return r.a.createElement(J.a.Item,{key:a},r.a.createElement("div",null,"\u5f00\u59cb\uff1a",t.startTime),r.a.createElement("div",null,"\u7ed3\u675f\uff1a",t.endTime),r.a.createElement("div",null,"\u80dc\u65b9\uff1a",n?e.player[n]:"\u68cb\u5c40\u672a\u4e0b\u5b8c"))}))))}}]),a}(n.Component),W=Object(m.b)((function(e){return{historyData:e.historyData}}))(L),G=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"frame"},r.a.createElement("div",{className:"left"},r.a.createElement(W,null)),r.a.createElement("div",{className:"center"},r.a.createElement("div",{className:"centerTop"},r.a.createElement(_,null)),r.a.createElement("div",{className:"gameWrap"},r.a.createElement(N,null)),r.a.createElement("div",{className:"centerBottom"},r.a.createElement(D,null))),r.a.createElement("div",{className:"right"},r.a.createElement(H,null)))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var $=a(50),F=a(141),q=a(142),K=a(73),Q=a(112),U=a.n(Q),V=a(257);function X(e){if("object"===typeof localStorage){var t=localStorage.getItem(e);try{return JSON.parse(t)}catch(a){return t}}return null}var Z="",ee="";function te(e){return function(t){return function(a){if("reset_status"===a.type&&"start"===a.gameStatus&&(Z=U()().format("YYYY-MM-DD HH:mm:ss")),t(a),("update_status"===a.type||"change_status"===a.type)&&a.gameStatus===d&&(ee=U()().format("YYYY-MM-DD HH:mm:ss")),Z&&ee){var n=e.getState();if(n.gameData.length>1){var r=X("historyData")||[],s={state:n,startTime:Z,endTime:ee};delete s.state.historyData,Z="",ee="";try{!function(e,t){if("object"===typeof localStorage){var a=t;"string"!==typeof t&&(a=void 0===a?null:JSON.stringify(a)),localStorage.setItem(e,a)}}("historyData",[].concat(Object(K.a)(r),[s]))}catch(i){V.a.error("\u7f13\u5b58\u5386\u53f2\u6570\u636e\u51fa\u9519")}e.dispatch({type:"refresh_history",dec:"\u5237\u65b0\u5386\u53f2\u6570\u636e"})}}}}}var ae={nextPlayer:f.defaultPlayer,gameStatus:d,winner:"",nowStep:0};var ne=[{data:new Array(f.rows*f.columns).fill(null),step:0}];function re(e,t){var a=e[e.length-1],n=Object(K.a)(a.data),r=a.step+1;return n[t.index]=t.player,[].concat(Object(K.a)(e),[{data:n,step:r}])}var se=ie();function ie(){return X("historyData")||[]}var ce=Object($.c)({setting:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"update_setting":return Object(B.a)(Object(B.a)({},e),t.settingData);case"reset_setting":return Object(B.a)(Object(B.a)({},e),f);default:return e}},status:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"reset_status":return Object(B.a)(Object(B.a)({},e),{},{nextPlayer:t.nextPlayer,gameStatus:t.gameStatus,winner:"",nowStep:0});case"update_status":return Object(B.a)(Object(B.a)({},e),{},{nextPlayer:t.nextPlayer,gameStatus:t.gameStatus,winner:t.winner,nowStep:t.nowStep});case"change_status":return Object(B.a)(Object(B.a)({},e),{},{gameStatus:t.gameStatus});default:return e}},gameData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"reset_data":return[{data:new Array(t.rows*t.columns).fill(null),step:0}];case"update_data":return re(e,t);default:return e}},historyData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"refresh_history":return ie();default:return e}}});Object(q.createLogger)();var oe=function(e){var t=[F.a,te];return Object($.d)(ce,e,$.a.apply(void 0,t))}();i.a.render(r.a.createElement(m.a,{store:oe},r.a.createElement(G,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[152,1,2]]]);
//# sourceMappingURL=main.7ffaedf6.chunk.js.map